<h4 class="margin-bottom-16">Welcome to MyCQs, <strong>{{currentUser.firstName}}</strong>!</h4>

<section class="row">
    <div class="col-md-12">
        <div class="well profile">
            <section class="row">
                <div class="col-sm-12">
                    <div class="col-xs-12 col-sm-8">
                        {{#if step1}}
                            {{#if currentUser.fbid}}
                                <h4>Are you happy with this profile picture?</h4>
                            {{else}}
                                <h4>Would you like to upload a profile picture?</h4>
                            {{/if}}
                        {{/if}}
                        {{#if step2}}
                            {{#if currentUser.education}}
                                <h4>Are these details about your education correct?</h4>
                            {{else}}
                                <h4>Would you like to add your education information?</h4>
                            {{/if}}
                            <p class="margin-bottom-16">We use your education information to personalise MyCQs for you!
                                This includes suggesting the most relevant tests to take and authors
                                to follow.</p>
                        {{/if}}
                        {{#if step3}}
                            {{#if userController.suggestedFollowingAll.length}}
                                <h4 class="margin-bottom-16">We have some users for you to follow, would you like to
                                    follow them all?</h4>
                                {{#each user in userController.suggestedFollowing}}
                                    {{#tool-tipster title=user.name position="top" class="inline-block margin-bottom-8"}}
                                        {{render 'profile-image' user}}
                                    {{/tool-tipster}}
                                {{/each}}
                                <div class="inline-block"> and
                                    {{math-helper userController.suggestedFollowingAll.length "-" 5}} others...
                                </div>
                            {{else}}
                                <h4 class="margin-bottom-16">Would you like to find your Facebook friends on MyCQs?</h4>
                            {{/if}}
                        {{/if}}
                    </div>
                    <div class="col-xs-12 col-sm-4">
                        <figure>
                            {{#if step1}}
                                <img id="image-holder" {{bind-attr src=imageFile.url}} class="hidden"/>

                                <div class="circular-image margin-bottom-16 pull-right"
                                    {{bind-attr style=imageFile.style}}></div>
                            {{/if}}
                            {{#if step2}}
                                <div class="card margin-bottom-16">
                                    {{#if currentUser.educationCohort.isFulfilled}}
                                        {{#if currentUser.educationCohort.institution}}
                                            <p><i class="fa fa-university margin-right-8"></i><a
                                                {{bind-attr href=currentUser.educationCohort.institution.fbObject.link}}
                                                    target="_blank">{{currentUser.educationCohort.institution.name}}</a>
                                            </p>
                                        {{/if}}
                                        {{#if currentUser.educationCohort.studyField}}
                                            <p><i class="fa fa-book margin-right-8"></i><a
                                                {{bind-attr href=currentUser.educationCohort.studyField.fbObject.link}}
                                                    target="_blank">{{currentUser.educationCohort.studyField.name}}</a>
                                            </p>
                                        {{/if}}
                                        {{#if currentUser.educationCohort.currentYear}}
                                            <p>
                                                <i class="fa fa-group margin-right-8"></i>{{currentUser.educationCohort.currentYear}}
                                            </p>
                                        {{/if}}
                                    {{/if}}
                                </div>
                            {{/if}}
                            {{#if step3}}
                                <h1 class="text-center">{{userController.suggestedFollowingAll.length}}
                                    <small> suggestions</small>
                                </h1>
                            {{/if}}
                        </figure>
                    </div>
                </div>
                <div class="col-xs-12 divider">
                    <section class="row">
                        <div class="col-xs-6 emphasis">
                            {{#if step1}}
                                <input type="file" id="imageInput" class="hidden"
                                    {{action 'previewImage' on='change'}}/>
                                <label class="btn btn-primary btn-lg margin-top-16"
                                       for="imageInput">
                                    No, Let me choose another
                                </label>
                            {{/if}}
                            {{#if step2}}
                                <button class="btn btn-primary btn-lg margin-top-16"
                                    {{action 'openModal' 'user/modal/course-selection' 'user' currentUser}}>
                                    No, let me fix them
                                </button>
                            {{/if}}
                            {{#if step3}}
                                <button class="btn btn-primary btn-lg margin-top-16"
                                    {{action 'openModal' 'user/modal/suggested-following' 'user'}}>
                                    Show me who they are
                                </button>
                            {{/if}}
                        </div>
                        <div class="col-xs-6 emphasis">
                            {{#if step1}}
                                <button class="btn btn-success btn-lg margin-top-16 pull-right"
                                    {{action 'acceptProfilePicture'}}>
                                    Yes, I like it
                                </button>
                            {{/if}}
                            {{#if step2}}
                                <button class="btn btn-success btn-lg margin-top-16 pull-right"
                                    {{action 'acceptEducationInfo'}}>
                                    Yes, they are correct
                                </button>
                            {{/if}}
                            {{#if step3}}
                                <button class="btn btn-success btn-lg margin-top-16 pull-right"
                                    {{action 'followAllSuggestedFollowing'}}>
                                    Yes!
                                </button>
                            {{/if}}
                        </div>
                    </section>
                    <section class="row">
                        <hr>
                        <div class="col-xs-6">
                            {{#if showGoBack}}
                                <span class="linkify" {{action 'previousStep'}}>Go back</span>
                            {{/if}}
                        </div>
                        <div class="col-xs-6">
                            {{#if showSkip}}
                                <span class="linkify pull-right" {{action 'nextStep'}}>Skip</span>
                            {{/if}}
                        </div>
                    </section>
                </div>
            </section>
        </div>
    </div>

</section>

<style>
    .profile {
        display: inline-block;
    }

    .profile .circular-image {
        height: 120px;
        width: 120px;
    }

    .divider {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }

    .emphasis h2 {
        margin-bottom: 0;
    }

    span.tags {
        background: #1abc9c;
        border-radius: 2px;
        color: #f5f5f5;
        font-weight: bold;
        padding: 2px 4px;
    }
</style>